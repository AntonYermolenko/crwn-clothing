{"ast":null,"code":"import { CART_ACTION_TYPES } from \"./cart.types\";\nimport { withMatcher } from \"../reducer/reducer.utils\";\nconst addCartItem = (cartItems, productToAdd) => {\n  const exisstingCartItem = cartItems.find(cartItem => cartItem.id === productToAdd.id);\n  if (exisstingCartItem) {\n    return cartItems.map(cartItem => cartItem.id === productToAdd.id ? {\n      ...cartItem,\n      quantity: cartItem.quantity + 1\n    } : cartItem);\n  }\n  return [...cartItems, {\n    ...productToAdd,\n    quantity: 1\n  }];\n};\nconst removeCartItem = (cartItems, cartItemToRemove) => {\n  const exisstingCartItem = cartItems.find(cartItem => cartItem.id === cartItemToRemove.id);\n  if (exisstingCartItem && exisstingCartItem.quantity === 1) {\n    return cartItems.filter(cartItem => cartItem.id !== cartItemToRemove.id);\n  }\n  return cartItems.map(cartItem => cartItem.id === cartItemToRemove.id ? {\n    ...cartItem,\n    quantity: cartItem.quantity - 1\n  } : cartItem);\n};\nexport const deleteCartItem = (cartItems, cartItemToDelete) => {\n  return cartItems.filter(cartItem => cartItem.id !== cartItemToDelete.id);\n};\nexport const setIsCartOpen = withMatcher(bool => ({\n  type: CART_ACTION_TYPES.SET_IS_CART_OPEN,\n  payload: bool\n}));\nexport const setCartItems = withMatcher(cartItems => ({\n  type: CART_ACTION_TYPES.SET_CART_ITEMS,\n  payload: cartItems\n}));\nexport const addItemToCart = (cartItems, productToAdd) => {\n  const newCartItems = addCartItem(cartItems, productToAdd);\n  return setCartItems(newCartItems);\n};\nexport const removeItemToCart = (cartItems, cartItemToRemove) => {\n  const newCartItems = removeCartItem(cartItems, cartItemToRemove);\n  return setCartItems(newCartItems);\n};\nexport const deleteItemToCart = (cartItems, cartItemToDelete) => {\n  const newCartItems = deleteCartItem(cartItems, cartItemToDelete);\n  return setCartItems(newCartItems);\n};","map":{"version":3,"names":["CART_ACTION_TYPES","withMatcher","addCartItem","cartItems","productToAdd","exisstingCartItem","find","cartItem","id","map","quantity","removeCartItem","cartItemToRemove","filter","deleteCartItem","cartItemToDelete","setIsCartOpen","bool","type","SET_IS_CART_OPEN","payload","setCartItems","SET_CART_ITEMS","addItemToCart","newCartItems","removeItemToCart","deleteItemToCart"],"sources":["C:/Users/Anton/Desktop/capstone-project/crwn-clothing/crwn-clothing/src/store/cart/cart.action.ts"],"sourcesContent":["import { CART_ACTION_TYPES, CartItem } from \"./cart.types\";\r\nimport { withMatcher,Action,ActionWithPayload } from \"../reducer/reducer.utils\";\r\nimport { CategoryItem } from \"../categories/category.types\";\r\nimport createAction from \"../../utils/firebase/reducer/reducer.utils\";\r\n\r\n\r\n\r\nconst addCartItem = (cartItems : CartItem[], productToAdd: CategoryItem): CartItem[] => {\r\n    const exisstingCartItem = cartItems.find((cartItem) => cartItem.id === productToAdd.id);\r\n    if (exisstingCartItem){\r\n        return cartItems.map((cartItem) => cartItem.id === productToAdd.id \r\n        ? {...cartItem, quantity: cartItem.quantity + 1} \r\n        : cartItem\r\n        );\r\n    }\r\n    return [...cartItems, {...productToAdd, quantity:1}]\r\n}\r\n\r\n\r\nconst removeCartItem = (cartItems : CartItem[], cartItemToRemove : CategoryItem): CartItem[] => {\r\n    const exisstingCartItem = cartItems.find((cartItem) => cartItem.id === cartItemToRemove.id);\r\n    if(exisstingCartItem && exisstingCartItem.quantity === 1 ){\r\n        return cartItems.filter(cartItem => cartItem.id !== cartItemToRemove.id);\r\n    }\r\n    return cartItems.map((cartItem) => cartItem.id === cartItemToRemove.id \r\n        ? {...cartItem, quantity: cartItem.quantity - 1} \r\n        : cartItem\r\n    );\r\n}\r\n\r\nexport const deleteCartItem = ( cartItems : CartItem[] , cartItemToDelete : CategoryItem ): CartItem[] => {\r\nreturn cartItems.filter(cartItem => cartItem.id !== cartItemToDelete.id);\r\n    \r\n};\r\n\r\nexport type SetIsCartOpen = ActionWithPayload<CART_ACTION_TYPES.SET_IS_CART_OPEN, boolean>\r\n\r\nexport type SetCartItems = ActionWithPayload<CART_ACTION_TYPES.SET_CART_ITEMS, CartItem[]>;\r\n\r\nexport const setIsCartOpen = withMatcher((bool:boolean): SetIsCartOpen => ({type: CART_ACTION_TYPES.SET_IS_CART_OPEN, payload: bool}));\r\n\r\nexport const setCartItems = withMatcher((cartItems: CartItem[]): SetCartItems => ({type: CART_ACTION_TYPES.SET_CART_ITEMS, payload: cartItems}))\r\n\r\nexport const addItemToCart = (cartItems: CartItem[], productToAdd: CategoryItem) => {\r\n    const newCartItems = addCartItem(cartItems, productToAdd);\r\n    return setCartItems(newCartItems);\r\n};\r\n\r\nexport const removeItemToCart = (cartItems: CartItem[], cartItemToRemove: CartItem) => {\r\n    const newCartItems = removeCartItem(cartItems, cartItemToRemove);\r\n    return setCartItems(newCartItems);\r\n};\r\n\r\nexport const deleteItemToCart = (cartItems: CartItem[], cartItemToDelete: CartItem ) => {\r\n    const newCartItems = deleteCartItem(cartItems, cartItemToDelete);\r\n    return setCartItems(newCartItems);\r\n};\r\n\r\n\r\n"],"mappings":"AAAA,SAASA,iBAAiB,QAAkB,cAAc;AAC1D,SAASC,WAAW,QAAiC,0BAA0B;AAM/E,MAAMC,WAAW,GAAGA,CAACC,SAAsB,EAAEC,YAA0B,KAAiB;EACpF,MAAMC,iBAAiB,GAAGF,SAAS,CAACG,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACC,EAAE,KAAKJ,YAAY,CAACI,EAAE,CAAC;EACvF,IAAIH,iBAAiB,EAAC;IAClB,OAAOF,SAAS,CAACM,GAAG,CAAEF,QAAQ,IAAKA,QAAQ,CAACC,EAAE,KAAKJ,YAAY,CAACI,EAAE,GAChE;MAAC,GAAGD,QAAQ;MAAEG,QAAQ,EAAEH,QAAQ,CAACG,QAAQ,GAAG;IAAC,CAAC,GAC9CH,QACF,CAAC;EACL;EACA,OAAO,CAAC,GAAGJ,SAAS,EAAE;IAAC,GAAGC,YAAY;IAAEM,QAAQ,EAAC;EAAC,CAAC,CAAC;AACxD,CAAC;AAGD,MAAMC,cAAc,GAAGA,CAACR,SAAsB,EAAES,gBAA+B,KAAiB;EAC5F,MAAMP,iBAAiB,GAAGF,SAAS,CAACG,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACC,EAAE,KAAKI,gBAAgB,CAACJ,EAAE,CAAC;EAC3F,IAAGH,iBAAiB,IAAIA,iBAAiB,CAACK,QAAQ,KAAK,CAAC,EAAE;IACtD,OAAOP,SAAS,CAACU,MAAM,CAACN,QAAQ,IAAIA,QAAQ,CAACC,EAAE,KAAKI,gBAAgB,CAACJ,EAAE,CAAC;EAC5E;EACA,OAAOL,SAAS,CAACM,GAAG,CAAEF,QAAQ,IAAKA,QAAQ,CAACC,EAAE,KAAKI,gBAAgB,CAACJ,EAAE,GAChE;IAAC,GAAGD,QAAQ;IAAEG,QAAQ,EAAEH,QAAQ,CAACG,QAAQ,GAAG;EAAC,CAAC,GAC9CH,QACN,CAAC;AACL,CAAC;AAED,OAAO,MAAMO,cAAc,GAAGA,CAAEX,SAAsB,EAAGY,gBAA+B,KAAkB;EAC1G,OAAOZ,SAAS,CAACU,MAAM,CAACN,QAAQ,IAAIA,QAAQ,CAACC,EAAE,KAAKO,gBAAgB,CAACP,EAAE,CAAC;AAExE,CAAC;AAMD,OAAO,MAAMQ,aAAa,GAAGf,WAAW,CAAEgB,IAAY,KAAqB;EAACC,IAAI,EAAElB,iBAAiB,CAACmB,gBAAgB;EAAEC,OAAO,EAAEH;AAAI,CAAC,CAAC,CAAC;AAEtI,OAAO,MAAMI,YAAY,GAAGpB,WAAW,CAAEE,SAAqB,KAAoB;EAACe,IAAI,EAAElB,iBAAiB,CAACsB,cAAc;EAAEF,OAAO,EAAEjB;AAAS,CAAC,CAAC,CAAC;AAEhJ,OAAO,MAAMoB,aAAa,GAAGA,CAACpB,SAAqB,EAAEC,YAA0B,KAAK;EAChF,MAAMoB,YAAY,GAAGtB,WAAW,CAACC,SAAS,EAAEC,YAAY,CAAC;EACzD,OAAOiB,YAAY,CAACG,YAAY,CAAC;AACrC,CAAC;AAED,OAAO,MAAMC,gBAAgB,GAAGA,CAACtB,SAAqB,EAAES,gBAA0B,KAAK;EACnF,MAAMY,YAAY,GAAGb,cAAc,CAACR,SAAS,EAAES,gBAAgB,CAAC;EAChE,OAAOS,YAAY,CAACG,YAAY,CAAC;AACrC,CAAC;AAED,OAAO,MAAME,gBAAgB,GAAGA,CAACvB,SAAqB,EAAEY,gBAA0B,KAAM;EACpF,MAAMS,YAAY,GAAGV,cAAc,CAACX,SAAS,EAAEY,gBAAgB,CAAC;EAChE,OAAOM,YAAY,CAACG,YAAY,CAAC;AACrC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}